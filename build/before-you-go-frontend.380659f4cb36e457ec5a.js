(()=>{"use strict";const e=Altis.Analytics,{history:t,addEventListener:r,sessionStorage:o}=window,i="beforeYouGo",a=t=>{const{callback:r,urls:o}=t;r&&o&&(t.url=(t=>{const r=(0,e.getAudiences)(),o=t.find((e=>{let{audience:t}=e;return r.includes(t)}));return!!o&&o.permalink})(o),r(t))},n=e=>{let{url:a}=e;a&&a!==window.location.href&&((e,a)=>{const n=window.location.href;if(t.state&&t.state.isForwardPage)return t.replaceState({},"",n),void window.location.reload();if(o.getItem(i))return;o.setItem(i,a),t.replaceState({isBackPage:!0},"",a),t.pushState({isForwardPage:!0},"",n),r("popstate",(e=>{let{state:{isBackPage:r,isForwardPage:o}}=e;(r||o)&&setTimeout((()=>{window.location.reload(),window.scrollTo(0,0),t.replaceState({},"",n)}))}))})(0,a)};window.addEventListener("load",(()=>{const e=Object.assign({referrers:[],utmSources:[],urls:[]},window.BYG||{});"function"!==typeof e.trigger?("function"!==typeof e.trigger&&(e.trigger=a),"function"!==typeof e.callback&&(e.callback=n),e.trigger(e)):e.trigger(e)}))})();